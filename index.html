<html>
  <title>test</title>
  <body>nothing </body>
</html><!-- Add this inside your <body> at an appropriate place -->
<button onclick="showConfirmPopup()">Send Data to Firebase</button>

<div id="confirmPopup" style="display:none; position:fixed; top:40%; left:50%; transform:translate(-50%, -50%);
     background:#fff; border:1px solid #ccc; padding:20px; box-shadow:0px 0px 10px rgba(0,0,0,0.3); z-index:100;">
  <p>Do you want to send your device info data to Firebase?</p>
  <button onclick="sendDataToFirebase()">Yes</button>
  <button onclick="hideConfirmPopup()">No</button>
</div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
  import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_AUTH_DOMAIN",
    projectId: "YOUR_PROJECT_ID",
    // Add other config fields as needed
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  function showConfirmPopup() {
    document.getElementById('confirmPopup').style.display = 'block';
  }
  
  function hideConfirmPopup() {
    document.getElementById('confirmPopup').style.display = 'none';
  }

  async function sendDataToFirebase() {
    hideConfirmPopup();

    // Gather your data - replace these with your actual collected values
    const data = {
      ip: document.getElementById("ip").innerText,
      browser: document.getElementById("browser").innerText,
      version: document.getElementById("version").innerText,
      os: document.getElementById("os").innerText,
      device_model: document.getElementById("device-model").innerText,
      screen_width: document.getElementById("width").innerText,
      screen_height: document.getElementById("height").innerText,
      battery_level: document.getElementById("battery").innerText,
      location: document.getElementById("location").innerText,
      timestamp: serverTimestamp()
    };

    try {
      const docRef = await addDoc(collection(db, "device_submissions"), data);
      console.log("Document written with ID: ", docRef.id);
      alert("Data successfully sent!");
    } catch (e) {
      console.error("Error adding document: ", e);
      alert("Failed to send data.");
    }
  }
</script></html>
